
<!DOCTYPE html>
<html>
  <head>
    <title>A Gentle Intro to Go</title>
    <meta charset='utf-8'>
    <script src='static/slides.js'></script>
  </head>

  <body style='display: none'>

    <section class='slides layout-widescreen'>
      
      <article>
        <h1>A Gentle Intro to Go</h1>
        
        <h3>22 February 2014</h3>
        
          <div class="presenter">
            
  
  <p>
    Fred Alger
  </p>
  

  
  <p>
    Increasing the Bus Factor at FoxyCart
  </p>
  

          </div>
        
          <div class="presenter">
            
          </div>
        
          <div class="presenter">
            
  
  <p>
    
  </p>
  

          </div>
        
      </article>
      
  
  
      <article>
      
        <h3>Goals</h3>
        
  <ul>
  
    <li>To give you a taste of Go...</li>
  
    <li>So you can get addicted like me. :)</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Goals (cont.)</h3>
        
  <ul>
  
    <li>Compare and contrast Go &amp; Python strengths</li>
  
    <li>Show ways that Go might help your project</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Me</h3>
        
  <ul>
  
    <li>Polyglot at heart</li>
  
    <li>BASIC → Visual Basic → C → C++ → PHP → SQL → Javascript → Java → Python → Ruby → Bash → Lasso (briefly) → Factor → Forth → Go</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Me</h3>
        
  <ul>
  
    <li>&#34;the right tool for the job&#34;</li>
  
    <li>Like simple things.</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Nowadays</h3>
        
  <ul>
  
    <li>Do a lot of system administration.</li>
  
    <li>Spread the knowledge</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h2>What do you call someone who writes Go code?</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>What do you call someone who writes Go code?</h3>
        
<div class="image">
  <img src="gopher.png">
</div>

      
      </article>
  
  
  
      <article>
      
        <h2>&#34;So a Gopher goes to a Python convention...&#34;</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>So what&#39;s the deal?</h3>
        
  <ul>
  
    <li>Just another programming lanugage?</li>
  
    <li>Something new.</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Why I think it&#39;s something new</h3>
        
  <ul>
  
    <li>whitespace like a pythonista</li>
  
    <li>elegant like a rubyist</li>
  
    <li>async like a node.js junkie</li>
  
    <li>concurrent like an erlanger</li>
  
    <li>typesafe and GC&#39;d like a Javabro</li>
  
    <li>minimal like a C guru</li>
  
  </ul>

<div class="image">
  <img src="gopher.png">
</div>

      
      </article>
  
  
  
      <article>
      
        <h3>What is Go?</h3>
        
  <ul>
  
    <li>Google</li>
  
    <li>Rob Pike (Plan 9) / Ken Thompson (B, UNIX) / Robert Griesemer (V8 / Chubby)</li>
  
    <li>~5 years old</li>
  
    <li>Surprisingly mature</li>
  
  </ul>

<div class="image">
  <img src="gopher.png">
</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Go?</h3>
        
  <ul>
  
    <li>Also &#34;Golang&#34;</li>
  
    <li>Statically typed</li>
  
    <li>Compiled</li>
  
    <li>Concurrent</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Go?</h3>
        
  <ul>
  
    <li>A stable language specification (v1.2 as of today)</li>
  
    <li>A runtime</li>
  
    <li>A suite of tools (<code>go</code> <code>build</code>, <code>go</code> <code>get</code>, <code>go</code> <code>install</code>, <code>go</code> <code>doc</code>)</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Hello Go</h3>
        
  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="1">package main</span>
<span num="2"></span>
<span num="3">import &#34;fmt&#34;</span>
<span num="4"></span>
<span num="5">func main() {</span>
<span num="6">    fmt.Println(&#34;Hello, 世界&#34;)</span>
<span num="7">}</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Hello Python</h3>
        
  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="1">#!/usr/bin/python</span>
<span num="2">          </span>
<span num="3">if __name__ == &#39;__main__&#39;:</span>
<span num="4">    print &#34;Hello, 世界!&#34;</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Hello Python</h3>
        
  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="1">#!/usr/bin/python</span>
<span num="2">          </span>
<span num="3">if __name__ == &#39;__main__&#39;:</span>
<span num="4">    print &#34;Hello, 世界!&#34;</span>
</pre>


</div>

  
  <p>
    BUT WAIT
  </p>
  

  
  <div class="code"><pre>SyntaxError: Non-ASCII character &#39;\xe4&#39; in file hello.py on line 3, but no encoding declared;
see http://www.python.org/peps/pep-0263.html for details</pre></div>
  

      
      </article>
  
  
  
      <article>
      
        <h3>Hello Python 2</h3>
        
  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="1">#!/usr/bin/python</span>
<span num="2"># -*- coding: utf-8 -*-</span>
<span num="3"># ^^^^ Don&#39;t forget that magic!</span>
<span num="4"></span>
<span num="5">if __name__ == &#39;__main__&#39;:</span>
<span num="6">    print &#34;Hello, 世界!&#34;</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h2>What&#39;s great!</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s great about Python</h3>
        
  <ul>
  
    <li>simple</li>
  
    <li>readable</li>
  
    <li>clean</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s great about Go: same values</h3>
        
  <ul>
  
    <li>Result: Programmer productivity.</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s great about Go: same values</h3>
        
  
  <p>
    Simple
<br>

    - concepts are easy to understand
<br>

     - (the implementation might still be sophisticated)
  </p>
  

  
  <p>
    Orthogonal
<br>

    - concepts mix cleanly
<br>

    - easy to understand and predict what happens
  </p>
  

  
  <p>
    Succinct
<br>

     - no need to predeclare every intention
  </p>
  

  
  <p>
    Safe
<br>

     - misbehavior should be detected
  </p>
  
<p class="link"><a href="http://gotocon.com/dl/jaoo-aarhus-2010/slides/RobPike_KeynoteTheExpressivenessOfGo.pdf" target="_blank">gotocon.com/dl/jaoo-aarhus-2010/slides/RobPike_KeynoteTheExpressivenessOfGo.pdf</a></p>
      
      </article>
  
  
  
      <article>
      
        <h2>Familiar?</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>Python philosophy</h3>
        
  
  <div class="code"><pre>&gt;&gt;&gt; import this
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren&#39;t special enough to break the rules.
...</pre></div>
  

      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s great about Python? (cont.)</h3>
        
  <ul>
  
    <li>Interactive development / REPL</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h2>But... Go is compiled!</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>Go is compiled</h3>
        
  <ul>
  
    <li>No REPL</li>
  
  </ul>

  
  <p>
    1. Edit code
<br>

    2. <code>go</code> <code>build</code> <code>test.go</code>
<br>

    3. <code> ./test</code>
  </p>
  

      
      </article>
  
  
  
      <article>
      
        <h3>Go is compiled</h3>
        
  <ul>
  
    <li>Compiled, but compiles quickly</li>
  
    <li>Extremely fast, build the whole Go compiler in &lt; 10 seconds</li>
  
    <li>Compiling prevents errors</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Compiler</h3>
        
  
  <p>
    Less of this:
  </p>
  

<div class="image">
  <img src="compiling.png">
</div>
<p class="link"><a href="http://xkcd.com/303/" target="_blank">xkcd.com/303/</a></p>
      
      </article>
  
  
  
      <article>
      
        <h3>Compiled (cont.)</h3>
        
  <ul>
  
    <li>Ways around save/compile/run</li>
  
    <li>e.g., Revel <a href="http://robfig.github.io/revel/" target="_blank">robfig.github.io/revel/</a></li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>What great about Python (cont.)</h3>
        
  <ul>
  
    <li>&#34;Batteries included&#34; standard library</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Go&#39;s standard library</h3>
        
  <ul>
  
    <li>Web-oriented</li>
  
    <li>System calls</li>
  
    <li>Encryption</li>
  
    <li>Compression / decompression</li>
  
    <li>Templating</li>
  
    <li>Production-grade web server</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Go standard library</h3>
        
  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="1">package main</span>
<span num="2"></span>
<span num="3">import (</span>
<span num="4">    &#34;log&#34;</span>
<span num="5">    &#34;fmt&#34;</span>
<span num="6">    &#34;net/http&#34;</span>
<span num="7">)</span>
<span num="8"></span>
<span num="9">func handler(w http.ResponseWriter, r *http.Request) { </span>
<span num="10">    fmt.Fprintf(w, &#34;Hello, %s.&#34;, r.URL.Path[1:]) </span>
<span num="11">    log.Println(&#34;GET&#34;, r.URL.Path)</span>
<span num="12">}</span>
<span num="13"></span>
<span num="14">func main() {</span>
<span num="15">    http.ListenAndServe(&#34;:3434&#34;, http.HandlerFunc(handler))</span>
<span num="16">}</span>
</pre>


</div>
<p class="link"><a href="http://localhost:3434/pytn" target="_blank">localhost:3434/pytn</a></p>
      
      </article>
  
  
  
      <article>
      
        <h3>Go web server</h3>
        
  <ul>
  
    <li>Production ready</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Go web server</h3>
        
  <ul>
  
    <li>Chunked encoding</li>
  
    <li>Keepalives</li>
  
    <li>Sandboxing</li>
  
    <li>Battle tested, DoS hardened</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Easy deployment</h3>
        
  <ul>
  
    <li>No nginx, copy the binary and run it</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s great about Python?</h3>
        
  <ul>
  
    <li>Built-in Docs</li>
  
    <li>Generated docs</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Godoc</h3>
        <p class="link"><a href="http://godoc.dev/pkg/net/http" target="_blank">godoc.dev/pkg/net/http</a></p><p class="link"><a href="http://godoc.dev/pkg/net/http/#Handler" target="_blank">godoc.dev/pkg/net/http/#Handler</a></p>
      
      </article>
  
  
  
      <article>
      
        <h3>Godoc</h3>
        
  <ul>
  
    <li>Works from the CLI too</li>
  
    <li>Interactive examples on <a href="http://golang.org" target="_blank">golang.org</a></li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s great about Python (cont.)</h3>
        
  <ul>
  
    <li>Community, PSR</li>
  
    <li>Made by smart people like YOU</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Go community</h3>
        
  <ul>
  
    <li>Small, active</li>
  
    <li>Full of smart, opinionated people</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h2>What could be better</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>What could be better (cont.)</h3>
        
  <ul>
  
    <li>Deployment — pip, virtualenv</li>
  
    <li><code>2.6</code> vs <code>2.7</code> vs <code>3k</code></li>
  
    <li>Needs &#34;legs&#34; — WSGI, worker pool, pool monitoring</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Go awesome: deployment</h3>
        
  <ul>
  
    <li>Copy the binary</li>
  
    <li>Run the binary</li>
  
    <li>Love the binary</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>What could be better (cont.)</h3>
        
  <ul>
  
    <li>Interpreter startup</li>
  
    <li>Especially on low-end systems (Raspberry Pi)</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Go awesome: cross compilation</h3>
        
  <ul>
  
    <li>Cross-compiling</li>
  
  </ul>

  
  <div class="code"><pre>goxc -bc=&#34;linux,arm&#34;</pre></div>
  

  <ul>
  
    <li>Builds arm binaries &amp; deb/rpm packages</li>
  
  </ul>
<p class="link"><a href="https://github.com/laher/goxc" target="_blank">github.com/laher/goxc</a></p>
      
      </article>
  
  
  
      <article>
      
        <h3>What could be better</h3>
        
  <ul>
  
    <li>I&#39;m actually OK with the GIL</li>
  
    <li>There are good reasons <i>for</i> it (C extensions)</li>
  
    <li>But...</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>What could be better (cont.)</h3>
        
  <ul>
  
    <li>It&#39;s bad for multi-threading, especially in CPU-bound programs.</li>
  
    <li>^C a multi-threaded Python program?  Good luck.</li>
  
  </ul>

  
  <p>
    Gory details:
  </p>
  
<p class="link"><a href="http://www.dabeaz.com/python/GIL.pdf" target="_blank">www.dabeaz.com/python/GIL.pdf</a></p>
      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s great about Go</h3>
        
  <ul>
  
    <li>FAST</li>
  
    <li>Cheap concurrency</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>FAST</h3>
        
<div class="image">
  <img src="Benchmark1.png">
</div>

      
      </article>
  
  
  
      <article>
      
        <h3>FAST (cont.)</h3>
        
<div class="image">
  <img src="Benchmark2.png">
</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Concurrency vs. parallelism</h3>
        
  <ul>
  
    <li>Threads vs. greenlets</li>
  
    <li>Go implements CSP</li>
  
  </ul>
<p class="link"><a href="http://en.wikipedia.org/wiki/Communicating_sequential_processes" target="_blank">en.wikipedia.org/wiki/Communicating_sequential_processes</a></p>
      
      </article>
  
  
  
      <article>
      
        <h3>Concurrency vs. parallelism</h3>
        
  <ul>
  
    <li>&#34;Share by Communicating&#34;</li>
  
    <li>Channels and goroutines vs. threads and locks/mutexes</li>
  
    <li>Nice abstraction</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Concurrency vs. parallelism</h3>
        
  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="1">package main</span>
<span num="2"></span>
<span num="3">import (</span>
<span num="4">    &#34;fmt&#34;</span>
<span num="5">    &#34;time&#34;</span>
<span num="6">)</span>
<span num="7"></span>
<span num="8">func counter(response chan int) {</span>
<span num="9">    for i := 0; i &lt; 3; i&#43;&#43; {</span>
<span num="10">        time.Sleep(1 * time.Second)</span>
<span num="11">        response &lt;- i</span>
<span num="12">    }</span>
<span num="13">    close(response)</span>
<span num="14">}</span>
<span num="15"></span>
<span num="16">func main() {</span>
<span num="17">    ch := make(chan int)</span>
<span num="18"></span>
<span num="19">    go counter(ch)</span>
<span num="20">    for resp := range(ch) {</span>
<span num="21">        fmt.Printf(&#34;Got: %d!\n&#34;, resp)</span>
<span num="22">    }</span>
<span num="23">}</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Concurrency vs. parallelism</h3>
        
  <ul>
  
    <li>Moore&#39;s Law</li>
  
    <li>Parallelism is the future</li>
  
    <li>Runtime support</li>
  
  </ul>

  
  <div class="code"><pre>export GOMAXPROCS=8 # number of CPUs</pre></div>
  

      
      </article>
  
  
  
      <article>
      
        <h2>More Go Strengths</h2>
      
      </article>
  
  
  
      <article>
      
        <h2>What&#39;s weird about Go</h2>
      
      </article>
  
  
  
      <article>
      
        <h2>More Go Strengths</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>Strong philosophy</h3>
        
  <ul>
  
    <li>Simple / Orthogonal / Succinct / Safe</li>
  
    <li>Programmer productivity</li>
  
    <li>Fun.</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Simple: Clean syntax</h3>
        
  <ul>
  
    <li>Few types and keywords (only 25)</li>
  
    <li>Smaller than most languages</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Clean</h3>
        
<div class="image">
  <img src="NumKw.png">
</div>
<p class="link"><a href="http://gotocon.com/dl/jaoo-aarhus-2010/slides/RobPike_KeynoteTheExpressivenessOfGo.pdf" target="_blank">gotocon.com/dl/jaoo-aarhus-2010/slides/RobPike_KeynoteTheExpressivenessOfGo.pdf</a></p>
      
      </article>
  
  
  
      <article>
      
        <h3>Simple: Automatic formatting</h3>
        
  <ul>
  
    <li>The standard for how Go code should be formatted?</li>
  
    <li>The output of the <code>go</code> <code>fmt</code> tool.</li>
  
    <li>PEP-8 on steroids</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Safe: Compiler (cont.)</h3>
        
  <ul>
  
    <li>Forces clean code</li>
  
    <li>Static checks are nice</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Compiler (cont.)</h3>
        
  
  <p>
    Unused variables:
  </p>
  

  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="1">package main</span>
<span num="2"></span>
<span num="3">import &#34;fmt&#34;</span>
<span num="4"></span>
<span num="5">func main() {</span>
<span num="6">    count := 27</span>
<span num="7">    fmt.Println(&#34;Count:&#34;)</span>
<span num="8">}</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Compiler (cont.)</h3>
        
  
  <p>
    Fat-fingered mistakes:
  </p>
  

  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="1">package main</span>
<span num="2"></span>
<span num="3">import &#34;fmt&#34;</span>
<span num="4"></span>
<span num="5">func main() {</span>
<span num="6">    count := 27</span>
<span num="7">    fmt.Println(&#34;Count:&#34;, cnout)</span>
<span num="8">}</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Compiler (cont.)</h3>
        
  
  <p>
    Monkey Business:
  </p>
  

  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="1">package main</span>
<span num="2"></span>
<span num="3">import &#34;fmt&#34;</span>
<span num="4"></span>
<span num="5">func main() {</span>
<span num="6">    count := 27</span>
<span num="7">    count()</span>
<span num="8">    fmt.Println(&#34;Count:&#34;, count)</span>
<span num="9">}</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Compiler (cont.)</h3>
        
  
  <p>
    Type safety:
  </p>
  

  <div class="code" contenteditable="true" spellcheck="false">


<pre contenteditable="true" spellcheck="false"><span num="1">package main</span>
<span num="2"></span>
<span num="3">import &#34;fmt&#34;</span>
<span num="4"></span>
<span num="5">func main() {</span>
<span num="6">    count := 27</span>
<span num="7">    fmt.Println(&#34;Count:&#34;, count)</span>
<span num="8">    count = &#34;twenty seven&#34;</span>
<span num="9">}</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Compiler (cont.)</h3>
        
  <ul>
  
    <li>Stops you from writing scummy code.</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Compiler</h3>
        
  <ul>
  
    <li>Checks yourself before you wrecks yourself</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h2>What&#39;s weird about Go</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s weird about Go</h3>
        
  
  <p>
    Pascal-style declarations
  </p>
  

  
  <div class="code"><pre>var count int
var samples []int    // Brackets first, really</pre></div>
  

  
  <div class="code"><pre>func sum(array []int) int {  // Return type at the end
    // ...
}</pre></div>
  

  
  <p>
    NOT
  </p>
  

  
  <div class="code"><pre>int count
int samples[]</pre></div>
  

  
  <div class="code"><pre>int sum(int array[]) {
}</pre></div>
  

      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s weird (cont.)</h3>
        
  
  <p>
    Pascal-style declarations
  </p>
  

  
  <div class="code"><pre>var count int
var samples []int

count := 1               // &#34;Declare and initialize&#34;
samples := make([]int)   // Type is inferred from RHS</pre></div>
  

  
  <p>
    &#34;You shouldn&#39;t have to repeat things that the compiler already knows or can guess.&#34;
  </p>
  

      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s weird (cont.)</h3>
        
  
  <p>
    The brackets thing is weird, I&#39;m still not 100% used to it.
  </p>
  

      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s weird (cont.)</h3>
        
  
  <p>
    Unused imports are an <b>error</b>
  </p>
  

  <div class="code" contenteditable="true" spellcheck="false">


<pre contenteditable="true" spellcheck="false"><span num="1">package main</span>
<span num="2"></span>
<span num="3">import &#34;fmt&#34;</span>
<span num="4">import &#34;encoding/json&#34;</span>
<span num="5"></span>
<span num="6">func main() {</span>
<span num="7">    fmt.Println(&#34;Hello, 世界&#34;)</span>
<span num="8">}</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s weird (cont.)</h3>
        
  
  <p>
    Module visibility is specified by upper or lower case.
  </p>
  

  
  <div class="code"><pre>package gravitron
 
func notExported() {
   // ...
}

func Exported() {
   // ...
}</pre></div>
  

      
      </article>
  
  
  
      <article>
      
        <h3>What&#39;s weird (cont.)</h3>
        
  <ul>
  
    <li>Object oriented, sort of</li>
  
    <li>Interfaces</li>
  
    <li>No inheritance, only embedding</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Actually, Interfaces are nice</h3>
        
  <ul>
  
    <li>Duck typing that gets checked</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Actually, Interfaces are nice</h3>
        
  <ul>
  
    <li>Interfaces specify &#34;I need a thing that does this&#34;</li>
  
  </ul>

  
  <div class="code"><pre>type Reader interface {
    Read(p []byte) (n int, err error)
}

func ReadData(reader io.Reader) {
}</pre></div>
  

      
      </article>
  
  
  
      <article>
      
        <h3>Actually, Interfaces are nice</h3>
        
  
  <p>
    Lots of things provide the Reader interface:
  </p>
  

  <ul>
  
    <li>Crypto algorithms</li>
  
    <li>Network sockets</li>
  
    <li>HTTP Requests</li>
  
    <li>MIME data</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Actually, Interfaces are nice</h3>
        
  
  <p>
    Lots of things use them as well:
  </p>
  

  <ul>
  
    <li>JSON decoder</li>
  
    <li><code>fmt</code>, Printf / Println to anywhere</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h2>Neat applications</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>Signals in Python</h3>
        
  
  <p>
    Callbacks
  </p>
  

  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="2">import signal, sys</span>
<span num="3"></span>
<span num="4">def handler(signum, frame):</span>
<span num="5">    print &#39;Got signal:&#39;, signum</span>
<span num="6">    sys.exit()</span>
<span num="7"></span>
<span num="8">signal.signal(signal.SIGQUIT, handler)</span>
<span num="9">signal.signal(signal.SIGINT, handler)</span>
<span num="10"></span>
<span num="11">while True:</span>
<span num="12">    pass</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Signals in Go</h3>
        
  
  <p>
    No Callbacks
  </p>
  

  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="10">func main() {</span>
<span num="11">    quit := make(chan os.Signal, 1)</span>
<span num="12"></span>
<span num="13">    signal.Notify(quit, os.Interrupt, os.Kill)</span>
<span num="14">    fmt.Println(&#34;Started&#34;)</span>
<span num="15"></span>
<span num="16">    // do some work ...</span>
<span num="17"></span>
<span num="18">    sig := &lt;- quit  // now wait</span>
<span num="19"></span>
<span num="20">    fmt.Println(&#34;Got signal:&#34;, sig)</span>
<span num="21">}</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Application: Cheap Concurrency</h3>
        
  <ul>
  
    <li>Little overhead</li>
  
    <li>Create thousands of goroutines every second</li>
  
    <li>Expressive patterns</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Concurrency</h3>
        
  
  <p>
    Working with a web API
  </p>
  

  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="5">func testUsers() {</span>
<span num="6">   <b>user := api.fetchUser(...) // blocking calls</b></span>
<span num="7">   store := api.fetchStore(...)</span>
<span num="8"></span>
<span num="9">   // ... other work</span>
<span num="10">   </span>
<span num="11">   <b>if (store.User != user.Id) {  // result used here</b></span>
<span num="12">      // ...</span>
<span num="13">   }</span>
<span num="14">}</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Concurrency (cont.)</h3>
        
  <ul>
  
    <li>Pretty common in a test suite</li>
  
    <li>Slow</li>
  
    <li>Threaded?  Could be annoying.</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Concurrency (cont.)</h3>
        
  <ul>
  
    <li>We can do better.</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Concurrency (cont.)</h3>
        
  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="5">func testUsers() {</span>
<span num="6">   <b>userChan  := make(chan User) // make channels</b></span>
<span num="7">   storeChan := make(chan Store)</span>
<span num="8"></span>
<span num="9">   go func() { userChan &lt;- api.fetchUser() }()  // goroutines start immediately</span>
<span num="10">   go func() { storeChan &lt;- api.fetchStore() }()</span>
<span num="11"></span>
<span num="12">   // this func does other work in parallel...</span>
<span num="13"></span>
<span num="14">   user := &lt;- userChan // and then waits for those operations to complete</span>
<span num="15">   store := &lt;- storeChan</span>
<span num="16">   if (store.User != user.Id) {</span>
<span num="17">      // ...</span>
<span num="18">   }</span>
<span num="19">}</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Concurrency (cont.)</h3>
        
  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="5">func testUsers() {</span>
<span num="6">   userChan  := make(chan User) // make channels</span>
<span num="7">   storeChan := make(chan Store)</span>
<span num="8"></span>
<span num="9">   <b>go func() { userChan &lt;- api.fetchUser() }()  // goroutines start immediately</b></span>
<span num="10">   go func() { storeChan &lt;- api.fetchStore() }()</span>
<span num="11"></span>
<span num="12">   // this func does other work in parallel...</span>
<span num="13"></span>
<span num="14">   user := &lt;- userChan // and then waits for those operations to complete</span>
<span num="15">   store := &lt;- storeChan</span>
<span num="16">   if (store.User != user.Id) {</span>
<span num="17">      // ...</span>
<span num="18">   }</span>
<span num="19">}</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Concurrency (cont.)</h3>
        
  <div class="code" contenteditable="true" spellcheck="false">


<pre><span num="5">func testUsers() {</span>
<span num="6">   userChan  := make(chan User) // make channels</span>
<span num="7">   storeChan := make(chan Store)</span>
<span num="8"></span>
<span num="9">   go func() { userChan &lt;- api.fetchUser() }()  // goroutines start immediately</span>
<span num="10">   go func() { storeChan &lt;- api.fetchStore() }()</span>
<span num="11"></span>
<span num="12">   <b>// this func does other work in parallel...</b></span>
<span num="13"></span>
<span num="14">   <b>user := &lt;- userChan // and then waits for those operations to complete</b></span>
<span num="15">   store := &lt;- storeChan</span>
<span num="16">   if (store.User != user.Id) {</span>
<span num="17">      // ...</span>
<span num="18">   }</span>
<span num="19">}</span>
</pre>


</div>

      
      </article>
  
  
  
      <article>
      
        <h3>Concurrency (cont.)</h3>
        
  <ul>
  
    <li>Let your program&#39;s logic dictate the flow, not threading / callback logic.</li>
  
    <li>Feels very natural.</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Further Applications</h3>
        
  <ul>
  
    <li>Tiny Servers</li>
  
    <li>Data collection</li>
  
    <li>Notifications</li>
  
    <li>Workers</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h2>Application: Tiny Servers</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>Application: Tiny Servers</h3>
        
  <ul>
  
    <li>CloudFlare&#39;s Railgun: http://blog.cloudflare.com/go-at-cloudflare</li>
  
    <li>HTTP proxy server</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Application: Tiny Servers</h3>
        
  <ul>
  
    <li>Compressed / delta / multiplexed replies</li>
  
    <li>Run on your server</li>
  
    <li>CloudFlare edge talks to it directly</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Application: Tiny Servers</h3>
        
  <ul>
  
    <li>Unique approach</li>
  
    <li>Big performance benefits</li>
  
    <li>Go features: speed, reliability, compiled binaries</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h2>Application: Data Collection</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>Application: Data Collection</h3>
        
  <ul>
  
    <li><code>bit.ly</code> wrote a Go implementation of etsy&#39;s <code>statsd</code>:</li>
  
  </ul>

  
  <p>
    https://github.com/bitly/statsdaemon
  </p>
  

  <ul>
  
    <li>Ad-hoc statistics and metrics for large data volumes.</li>
  
    <li>Simple to deploy.</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h2>Application: Notifications</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>Application: Notifications</h3>
        
  <ul>
  
    <li>Websocket / real-time</li>
  
  </ul>

  
  <div class="code"><pre>import &#34;code.google.com/p/go.net/websocket&#34;</pre></div>
  

  <ul>
  
    <li>Redis</li>
  
    <li>MongoDB</li>
  
    <li>Message queues (RabbitMQ)</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Application: Notifications</h3>
        
  <ul>
  
    <li>bit.ly wrote their own &#34;distributed realtime messaging at scale&#34; <a href="http://word.bitly.com/post/33232969144/nsq" target="_blank">word.bitly.com/post/33232969144/nsq</a></li>
  
    <li>Python and Go clients</li>
  
    <li>Go server</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Application: Notifications</h3>
        
  
  <div class="code"><pre>Regarding NSQ, Go channels (not to be confused with NSQ channels)
and the language’s built in concurrency features are a perfect fit
for the internal workings of nsqd. We leverage buffered channels
to manage our in memory message queues and seamlessly write
overflow to disk.</pre></div>
  
<p class="link"><a href="http://word.bitly.com/post/33232969144/nsq" target="_blank">word.bitly.com/post/33232969144/nsq</a></p>
      
      </article>
  
  
  
      <article>
      
        <h2>Application: Workers</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>Application: Workers</h3>
        
  <ul>
  
    <li>Very fast to start up and begin work</li>
  
    <li>Efficient on cloud environments</li>
  
    <li>Nice database and message queue libraries</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h2>Application: Distributed Data Stores</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>Application: Distributed Data Stores</h3>
        
  <ul>
  
    <li>Various key-value stores, many Redis-like</li>
  
    <li><code>CoreOS</code> / etcd</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Application: Distributed Data Stores</h3>
        
  <ul>
  
    <li>HTTP API for configuration information</li>
  
    <li>Failover, service coordination</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Application: Distributed Data Stores</h3>
        
  <ul>
  
    <li>Implementation of Raft algorithm</li>
  
    <li>Strong CAP guarantees</li>
  
  </ul>

  
  <div class="code"><pre>import &#34;https://github.com/goraft/raft&#34;</pre></div>
  

      
      </article>
  
  
  
      <article>
      
        <h2>Conclusion</h2>
      
      </article>
  
  
  
      <article>
      
        <h3>Conclusion</h3>
        
  <ul>
  
    <li>Go and Python share a lot of values</li>
  
    <li>Go has some unique strengths</li>
  
    <li>Plenty of real-world applications</li>
  
    <li>Might be a good fit for your next project!</li>
  
  </ul>

      
      </article>
  
  
  
      <article>
      
        <h3>Where to Go from here</h3>
        
  <ul>
  
    <li>Go homepage <a href="http://golang.org" target="_blank">golang.org</a></li>
  
    <li>Go Tour <a href="http://golang.org/tour" target="_blank">golang.org/tour</a></li>
  
    <li>Interactive samples, no download required</li>
  
  </ul>

      
      </article>
  
  

      <article>
        <h3>Thank you</h1>
        
          <div class="presenter">
            
  
  <p>
    Fred Alger
  </p>
  

  
  <p>
    Increasing the Bus Factor at FoxyCart
  </p>
  
<p class="link"><a href="https://github.com/phred" target="_blank">https://github.com/phred</a></p>
          </div>
        
          <div class="presenter">
            <p class="link"><a href="http://twitter.com/_phred" target="_blank">@_phred</a></p><p class="link"><a href="mailto:fred@fredalger.net" target="_blank">fred@fredalger.net</a></p>
          </div>
        
          <div class="presenter">
            
  
  <p>
    
  </p>
  

          </div>
        
      </article>

  </body>
  
</html>
